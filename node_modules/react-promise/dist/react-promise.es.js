import e from"react";import t from"prop-types";var n={none:"none",pending:"pending",rejected:"rejected",resolved:"resolved"},o=function(e){function t(t){e.call(this,t),this.state={status:n.none}}return e&&(t.__proto__=e),(t.prototype=Object.create(e&&e.prototype)).constructor=t,t.prototype.componentWillReceiveProps=function(e){e.promise!==this.props.promise&&(this.setState({status:n.none}),this.handlePromise(e.promise))},t.prototype.handlePromise=function(e){var t=this;this.promise=e,this.setState({status:n.pending}),e.then(function(o){t.promise===e&&(t.unmounted||t.setState({status:n.resolved,value:o}))},function(o){t.promise===e&&(t.unmounted||t.setState({status:n.rejected,value:o}))})},t.prototype.componentWillMount=function(){this.props.promise&&this.handlePromise(this.props.promise)},t.prototype.componentWillUnmount=function(){this.unmounted=!0},t.prototype.render=function(){var e=this.props,o=this.state;switch(o.status){case n.none:if(e.before)return e.before(this.handlePromise.bind(this));break;case n.pending:if(e.pending)return"function"==typeof e.pending?e.pending():e.pending;if(t.defaultPending)return"function"==typeof t.defaultPending?t.defaultPending():t.defaultPending;break;case n.resolved:if(e.then)return e.then(o.value);break;case n.rejected:if(e.catch)return e.catch(o.value)}return null},t}(e.Component);o.propTypes={before:t.func,then:t.func,catch:t.func,pending:t.oneOfType([t.node,t.func]),promise:t.object},o.Async=o;export default o;export{o as Async};
//# sourceMappingURL=react-promise.es.js.map
